# PostgreSQL –≤ Django –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ –º–æ–¥–µ–ª—ñ Book üìö

–ú–æ–¥–µ–ª—å **Book** –≤ Django –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –∫–Ω–∏–≥—É –∑ —Ç–∞–∫–∏–º–∏ –ø–æ–ª—è–º–∏, —è–∫ –Ω–∞–∑–≤–∞ (title), –∞–≤—Ç–æ—Ä (author), —Ç–∏–ø –æ–±–∫–ª–∞–¥–∏–Ω–∫–∏ (cover), –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å –Ω–∞ —Å–∫–ª–∞–¥—ñ (inventory), —Ç–∞ —â–æ–¥–µ–Ω–Ω–∏–π –∑–±—ñ—Ä –∑–∞ –æ—Ä–µ–Ω–¥—É (daily_fee). –¶—è –º–æ–¥–µ–ª—å –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö PostgreSQL, —ñ —á–µ—Ä–µ–∑ Django ORM –º–∏ –º–æ–∂–µ–º–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –Ω–µ—é –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö SQL –∑–∞–ø–∏—Ç—ñ–≤.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ñ —É PostgreSQL üóÉÔ∏è

–ö–æ–ª–∏ –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—ó, Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î —Ç–∞–±–ª–∏—Ü—é –¥–ª—è —Ü—ñ—î—ó –º–æ–¥–µ–ª—ñ —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö. SQL-–≤–∏—Ä–∞–∑ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ –≤ PostgreSQL –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:

```sql
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    author VARCHAR(255) DEFAULT 'Unknown Author',
    cover VARCHAR(4) CHECK (cover IN ('HARD', 'SOFT')),
    inventory INTEGER NOT NULL,
    daily_fee NUMERIC(6, 2) NOT NULL
);
```

–¢–∞–±–ª–∏—Ü—è books –º—ñ—Å—Ç–∏—Ç–∏–º–µ:

- `id`: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ—ó –Ω–æ–≤–æ—ó –∫–Ω–∏–≥–∏ (—Ü–µ –ø–æ–ª–µ —î –ø–µ—Ä–≤–∏–Ω–Ω–∏–º –∫–ª—é—á–µ–º). üîë
- `title`: –ù–∞–∑–≤–∞ –∫–Ω–∏–≥–∏. üìñ
- `author`: –ê–≤—Ç–æ—Ä –∫–Ω–∏–≥–∏, –∑ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º "Unknown Author". ‚úçÔ∏è
- `cover`: –¢–∏–ø –æ–±–∫–ª–∞–¥–∏–Ω–∫–∏ (–º–æ–∂–µ –±—É—Ç–∏ –∞–±–æ "HARD", –∞–±–æ "SOFT"). üíºüìö
- `inventory`: –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–∏–Ω–∏—Ü—å —Ü—ñ—î—ó –∫–Ω–∏–≥–∏ –Ω–∞ —Å–∫–ª–∞–¥—ñ. üì¶
- `daily_fee`: –©–æ–¥–µ–Ω–Ω–∏–π –∑–±—ñ—Ä –∑–∞ –æ—Ä–µ–Ω–¥—É –∫–Ω–∏–≥–∏ (–¥–µ—Å—è—Ç–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è). üíµ

## CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó üõ†Ô∏è

### 1. Create (–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É) ‚ú®

–î–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó –∫–Ω–∏–≥–∏ –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Django ORM, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

```python
from myapp.models import Book

new_book = Book.objects.create(
    title="The Great Gatsby",
    author="F. Scott Fitzgerald",
    cover="HARD",
    inventory=10,
    daily_fee=1.99
)
```

–¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å SQL-–∑–∞–ø–∏—Ç —Ç–∏–ø—É:

```sql
INSERT INTO books (title, author, cover, inventory, daily_fee)
VALUES ('The Great Gatsby', 'F. Scott Fitzgerald', 'HARD', 10, 1.99);
```

### 2. Read (–ß–∏—Ç–∞–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤) üìñ

–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–Ω–∏–≥–∏, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –≤–∏–±–æ—Ä—É –¥–∞–Ω–∏—Ö:

–í–∏–±—ñ—Ä —É—Å—ñ—Ö –∫–Ω–∏–≥:
```python
books = Book.objects.all()
```

–¶–µ –∑–≥–µ–Ω–µ—Ä—É—î SQL-–∑–∞–ø–∏—Ç:

```sql
SELECT * FROM books;
```

–í–∏–±—ñ—Ä –∫–Ω–∏–≥–∏ –∑–∞ —ó—ó ID:
```python
book = Book.objects.get(id=1)
```

SQL-–∑–∞–ø–∏—Ç:

```sql
SELECT * FROM books WHERE id=1;
```

### 3. Update (–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É) üîÑ

–î–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–µ—Ç–æ–¥ `save()` –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∑ –ø–æ–ª—ñ–≤:

```python
book = Book.objects.get(id=1)
book.inventory = 12  # –û–Ω–æ–≤–ª—é—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–Ω–∏–≥ –Ω–∞ —Å–∫–ª–∞–¥—ñ
book.save()
```

–¶–µ –∑–≥–µ–Ω–µ—Ä—É—î SQL-–∑–∞–ø–∏—Ç:

```sql
UPDATE books SET inventory=12 WHERE id=1;
```

### 4. Delete (–í–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É) ‚ùå

–î–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–µ—Ç–æ–¥ `delete()`:

```python
book = Book.objects.get(id=1)
book.delete()  # –í–∏–¥–∞–ª–∏—Ç–∏ –∫–Ω–∏–≥—É –∑ id=1
```

SQL-–∑–∞–ø–∏—Ç –±—É–¥–µ —Ç–∞–∫–∏–º:

```sql
DELETE FROM books WHERE id=1;
```

–ê–±–æ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –∑–∞–ø–∏—Å—ñ–≤:

```python
Book.objects.filter(author="F. Scott Fitzgerald").delete()
```

–ó–∞–ø–∏—Ç:

```sql
DELETE FROM books WHERE author='F. Scott Fitzgerald';
```

## –ü—ñ–¥—Å—É–º–∫–∏ üéØ

- **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ**: Django –≥–µ–Ω–µ—Ä—É—î SQL –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ PostgreSQL –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π.
- **CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó**: Django ORM –Ω–∞–¥–∞—î –ø—Ä–æ—Å—Ç—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (Create, Read, Update, Delete).
- **SQL-–∑–∞–ø–∏—Ç–∏**: –í—Å—ñ –∑–∞–ø–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è Django ORM, —Ç–∞–∫ —â–æ –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–∏—Å–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω–∏–π SQL –≤—Ä—É—á–Ω—É. üîÑ

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Elasticsearch –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø–æ—à—É–∫—É üîç
–ü—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö –∫–Ω–∏–≥ –º–∏ –∑—ñ—Ç–∫–Ω—É–ª–∏—Å—è –∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—é –ø—Ä–∏—Å–∫–æ—Ä–∏—Ç–∏ –ø–æ—à—É–∫–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó. –ù–µ–∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å PostgreSQL, –¥–ª—è –±—ñ–ª—å—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–≤–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ—à—É–∫—É –º–∏ –≤–ø—Ä–æ–≤–∞–¥–∏–ª–∏ Elasticsearch.
–ú—ñ–≥—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö üîÑ
–ü—Ä–æ—Ü–µ—Å –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤–∫–ª—é—á–∞–≤ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:

- –ß–∞—Å—Ç–∫–æ–≤–µ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ PostgreSQL –≤ Elasticsearch
- –Ü–Ω–¥–µ–∫—Å–∞—Ü—ñ—è –∫–Ω–∏–≥ –∑–∞ –∫–ª—é—á–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏: title, author
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è analyzer –¥–ª—è –±—ñ–ª—å—à —Ç–æ—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É

# –ü—Ä–∏–∫–ª–∞–¥ —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó –≤ Elasticsearch
```python
def index_book(book):
    es_client.index(
        index='books',
        body={
            'title': book.title,
            'author': book.author,
            'inventory': book.inventory
        }
    )
```
### –ü–µ—Ä–µ–≤–∞–≥–∏ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è üöÄ

- –ß–∞—Å –ø–æ—à—É–∫—É –∑–º–µ–Ω—à–∏–≤—Å—è –Ω–∞ 70-80%
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–µ—á—ñ—Ç–∫–æ–≥–æ –ø–æ—à—É–∫—É
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å–∫–ª–∞–¥–Ω–∏—Ö –ø–æ—à—É–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è SQL —Ç–∞ NoSQL –±–∞–∑ –¥–∞–Ω–∏—Ö üìä
#### SQL (PostgreSQL):
–ü–ª—é—Å–∏:

- –°—Ç—Ä–æ–≥–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö
- ACID-—Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- –¶—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö

–ú—ñ–Ω—É—Å–∏:

- –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
- –§—ñ–∫—Å–æ–≤–∞–Ω–∞ —Å—Ö–µ–º–∞
- –ü–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π –ø–æ–≤–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫

#### NoSQL (Elasticsearch):
–ü–ª—é—Å–∏:

- –í–∏—Å–æ–∫–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å –ø–æ—à—É–∫—É
- –ì–Ω—É—á–∫–∞ —Å—Ö–µ–º–∞ –¥–∞–Ω–∏—Ö
- –õ–µ–≥–∫–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

–ú—ñ–Ω—É—Å–∏:

- Eventual consistency
- –°–∫–ª–∞–¥–Ω—ñ—à–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å–∫–ª–∞–¥–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- –í–∏—â–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
